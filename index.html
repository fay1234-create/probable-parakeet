<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Club Poem — Try to Get Up</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tufte-css@1.8.0/tufte.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <style>
    :root {
      --bg: #000000;
      --ink: #ffffff;
      --accent: #ff0077;
    }
    body {
      margin: 0;
      font-family: 'Inter', system-ui;
      background: var(--bg);
      color: var(--ink);
      transition: background 0.6s ease, color 0.6s ease;
    }
    main.tufte {
      max-width: 70ch;
      margin: 3rem auto;
      padding: 2rem;
    }
    section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: flex-start;
      overflow: hidden;
    }
    h2, p {
      opacity: 0;
      transform: translateY(30px);
    }
    button {
      background: var(--accent);
      border: none;
      color: white;
      padding: 1rem 2rem;
      font-size: 1.1rem;
      cursor: pointer;
      border-radius: 6px;
      margin-top: 2rem;
    }
  </style>
</head>
<body>
  <main class="tufte">

    <section id="club">
      <h2 data-animate data-color="#ff0077">Bass under my skin.</h2>
      <p data-animate data-color="#00ff88">We’re shouting nothing, but it feels like everything.</p>
      <p data-animate data-color="#00d7ff">“Another round?” “Obviously!”</p>
      <p data-animate data-color="#ffb400">The room sways, I laugh too loud.</p>
      <p data-animate data-color="#ff66cc">You lean in close, phone raised—</p>
    </section>

    <section id="flash">
      <h2 data-animate data-color="#ffffff">FLASH.</h2>
      <p data-animate data-color="#000000">A burst. Whiteout. My name—your hand—</p>
      <p data-animate data-color="#220011">—the floor rises fast.</p>
    </section>

    <section id="fall">
      <h2 data-animate data-color="#220011">Black. Ringing.</h2>
      <p data-animate data-color="#330022">Someone shouting. Can't tell what.</p>
      <button id="getup">try to get up</button>
    </section>

    <section id="wake" style="display:none;">
      <h2 data-animate data-color="#660044">“You okay?”</h2>
      <p data-animate data-color="#990066" style="font-size:2rem;">“Hey—hey—look at me.”</p>
      <p data-animate data-color="#cc0088" style="font-size:3rem;">“You okay?” “Hey!”</p>
      <p data-animate data-color="#ff33aa" style="font-size:1.5rem;">Lights flicker. Music doesn’t stop.</p>
    </section>

    <section id="blur" style="display:none;">
      <h2 data-animate data-color="#00ff88">The night moves on.</h2>
      <p data-animate data-color="#00d7ff">Colours spin faster.</p>
      <p data-animate data-color="#ff0077">Words blur, laughter returns—</p>
      <p data-animate data-color="#ff8800">as if nothing happened.</p>
    </section>

  </main>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    const lines = document.querySelectorAll('[data-animate]');

    // Animate each line individually and change background per line
    lines.forEach((el, i) => {
      const color = el.dataset.color || '#000000';

      gsap.fromTo(el, { y: 40, autoAlpha: 0 }, {
        y: 0,
        autoAlpha: 1,
        duration: 0.8,
        ease: 'power3.out',
        scrollTrigger: {
          trigger: el,
          start: 'top 85%',
          end: 'bottom 60%',
          toggleActions: 'play none none reverse',
          onEnter: () => {
            gsap.to('body', { backgroundColor: color, duration: 1 });
          },
          onEnterBack: () => {
            gsap.to('body', { backgroundColor: color, duration: 1 });
          }
        }
      });
    });

    // Flash section effect
    ScrollTrigger.create({
      trigger: '#flash',
      start: 'top center',
      onEnter: () => {
        gsap.to('body', {background: '#ffffff', duration: 0.1});
        gsap.to('body', {background: '#000000', delay: 0.2, duration: 1});
      }
    });

    // Button interaction
    let clicks = 0;
    const button = document.getElementById('getup');
    const wake = document.getElementById('wake');
    const blur = document.getElementById('blur');
    button.addEventListener('click', () => {
      clicks++;
      if (clicks < 3) {
        button.textContent = `try to get up (${3 - clicks} more)`;
        gsap.to(button, {scale: 1.1, duration: 0.2, yoyo: true, repeat: 1});
      } else {
        button.textContent = '...';
        gsap.to(button, {autoAlpha: 0, duration: 0.5, onComplete: () => {
          wake.style.display = 'block';
          blur.style.display = 'block';
          ScrollTrigger.refresh();
        }});
      }
    });

    // After wake section: faster, muddled colours
    ScrollTrigger.create({
      trigger: '#blur',
      start: 'top center',
      onEnter: () => {
        gsap.to('body', {backgroundColor: '#ff00ff', repeat: -1, yoyo: true, duration: 0.4, ease: 'none'});
      }
    });
  </script>
</body>
</html>


