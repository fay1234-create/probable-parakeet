<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Club Story — Scroll the Night</title>

  <!-- Tufte CSS for elegant typographic layout -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tufte-css@1.8.0/tufte.min.css">

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <style>
    :root{
      --bg: #0b0b0b;
      --paper: #0b0b0b;
      --ink: #f7f7f7;
      --accent: #ff0077;
      --muted: rgba(255,255,255,0.06);
    }

    html,body{height:100%;}
    body{
      margin:0;
      font-family: "Inter", system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: linear-gradient(180deg,var(--bg), #050505 70%);
      color:var(--ink);
      -webkit-font-smoothing:antialiased;
      scroll-behavior: smooth;
      transition: background 0.4s linear, color 0.4s linear;
    }

    main.tufte{
      max-width: 70ch;
      margin: 3rem auto 6rem;
      padding: 1rem 2rem;
    }

    header.site-hero{
      position:sticky;
      top:0;
      z-index:20;
      backdrop-filter: blur(6px) saturate(1.1);
      -webkit-backdrop-filter: blur(6px) saturate(1.1);
      padding:1rem 1.25rem;
      display:flex;
      align-items:center;
      gap:1rem;
      background:linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.05));
      border-bottom: 1px solid rgba(255,255,255,0.03);
    }

    .logo{
      font-weight:800;
      letter-spacing:0.08em;
      font-size:1rem;
      color:var(--accent);
    }

    h1.story-title{
      font-size: clamp(2rem, 3.8vw, 3rem);
      margin:0 0 0.25rem 0;
      line-height:1.02;
      letter-spacing:-0.02em;
      font-weight:800;
      color:var(--ink);
      text-transform:uppercase;
    }

    .lead{
      font-size:1.05rem;
      opacity:0.95;
      margin-top:0.5rem;
    }

    section.page-chapter{
      padding:6rem 0;
      min-height:70vh;
      display:grid;
      align-items:center;
      gap:1.25rem;
    }

    .kicker{
      text-transform:uppercase;
      font-weight:700;
      font-size:0.78rem;
      letter-spacing:0.15em;
      opacity:0.9;
      color:var(--accent);
    }

    .big{
      font-size: clamp(1.4rem, 3.5vw, 2.1rem);
      line-height:1.05;
      font-weight:700;
      margin:0.2rem 0 0;
    }

    .ambient{
      font-size:1rem;
      color:rgba(255,255,255,0.92);
      opacity:0.95;
      margin-top:1rem;
      max-width:50ch;
    }

    /* small decorative band that changes with accent */
    .accent-band{
      position:fixed;
      left:0;
      right:0;
      height:4px;
      top:0;
      z-index:30;
      background:linear-gradient(90deg,var(--accent), transparent);
      box-shadow: 0 6px 24px var(--muted);
      pointer-events:none;
      transition: background 0.3s linear;
    }

    .grid-notes{
      display:grid;
      grid-template-columns: 1fr 240px;
      gap:1.25rem;
      align-items:start;
    }

    aside.marginnote{
      position:relative;
      margin-left:1rem;
      font-size:0.9rem;
      color:rgba(255,255,255,0.82);
    }

    .beat{
      display:inline-block;
      transform-origin:50% 50%;
    }

    footer.note{
      margin-top:4rem;
      font-size:0.85rem;
      color:rgba(255,255,255,0.6);
    }

    /* responsive
    -------------------------------------------------- */
    @media (max-width:900px){
      .grid-notes{grid-template-columns:1fr;}
      aside.marginnote{order:2}
    }
  </style>
</head>
<body>
  <div class="accent-band" aria-hidden="true"></div>
  <header class="site-hero" role="banner">
    <div class="logo">NOCTURNE</div>
    <div>
      <h1 class="story-title">Scroll the Night</h1>
      <div class="lead">A fast‑paced club atmosphere told in breathless vignettes — colors, type, and motion pulled by your scroll.</div>
    </div>
  </header>

  <main class="tufte">

    <!-- Chapter 1 -->
    <section class="page-chapter" data-color="#0b0b0b" data-accent="#ff0077" id="ch1">
      <div class="grid-notes">
        <article>
          <div class="kicker">1 — Arrival</div>
          <h2 class="big beat" data-animate>Body in the doorway — bass like a pulse.</h2>
          <p class="ambient" data-animate>Lights comb across the crowd in brittle slices. The floor answers. Shoes click, laughter snaps. You move without thinking — carried in the current. There's a name someone calls; it dissolves into the strobe.</p>
        </article>

        <aside class="marginnote">The queue is a vein. Someone exhales a cigarette like a neon comma.</aside>
      </div>
    </section>

    <!-- Chapter 2 -->
    <section class="page-chapter" data-color="#0a1632" data-accent="#00d7ff" id="ch2">
      <div class="kicker">2 — The Drop</div>
      <h2 class="big beat" data-animate>Lights fold in on the beat — gravity rearranged.</h2>
      <p class="ambient" data-animate>Beat drops and the room inhales. A flash of cyan, a smear of movement. Faces become landscapes you have time to only glance at — a laugh, a shoulder, the way sweat catches the light like currency.</p>
      <footer class="note">DJ's cue: hold. breathe. fall.</footer>
    </section>

    <!-- Chapter 3 -->
    <section class="page-chapter" data-color="#1a0b29" data-accent="#b100ff" id="ch3">
      <div class="grid-notes">
        <article>
          <div class="kicker">3 — Encounter</div>
          <h2 class="big beat" data-animate>Eyes lock — an orbit begins.</h2>
          <p class="ambient" data-animate>Words are traded like wildcards. The bar glows behind you; someone else’s silhouette is a poem. The DJ stretches time like taffy, a note held just long enough to matter.</p>
        </article>
        <aside class="marginnote">A spilled drink maps the floor like a constellation.</aside>
      </div>
    </section>

    <!-- Chapter 4 -->
    <section class="page-chapter" data-color="#08301a" data-accent="#00ff88" id="ch4">
      <div>
        <div class="kicker">4 — Momentum</div>
        <h2 class="big beat" data-animate>Bodies become architecture — movement as language.</h2>
        <p class="ambient" data-animate>The tempo is a promise kept. You slide through hands and heat. Laugh lines turn electric; each inhale tastes of sugar and smoke and possibility.</p>
      </div>
    </section>

    <!-- Chapter 5 -->
    <section class="page-chapter" data-color="#2b071b" data-accent="#ffb400" id="ch5">
      <div class="grid-notes">
        <article>
          <div class="kicker">5 — Dawn</div>
          <h2 class="big beat" data-animate>Sunlight tries to learn the rhythm.</h2>
          <p class="ambient" data-animate>Outside the world has softened; inside, the night folds into a private aftertaste. People hug like apologies. Sound remembers how to be gentle.</p>
        </article>
        <aside class="marginnote">Last drink: a quiet argument with sugar.</aside>
      </div>
    </section>

  </main>

  <script>
    // init GSAP
    gsap.registerPlugin(ScrollTrigger);

    // softly animate text blocks when they enter the viewport
    document.querySelectorAll('[data-animate]').forEach((el, i) => {
      gsap.fromTo(el,
        {y: 24, autoAlpha:0, scale:0.995},
        {
          y:0,
          autoAlpha:1,
          scale:1,
          duration: 0.9,
          ease: 'power3.out',
          delay: i*0.03,
          scrollTrigger: {
            trigger: el,
            start: 'top 85%',
            toggleActions: 'play none none reverse'
          }
        }
      );
    });

    // create a ScrollTrigger that morphs colors as you scroll through sections
    const sections = Array.from(document.querySelectorAll('section.page-chapter'));

    // map each section to its color stop
    sections.forEach((sec, idx) => {
      const color = sec.getAttribute('data-color') || '#000000';
      const accent = sec.getAttribute('data-accent') || '#ff0077';

      ScrollTrigger.create({
        trigger: sec,
        start: 'top center',
        end: 'bottom center',
        scrub: 0.8,
        onUpdate: (self) => {
          // progress ranges 0..1 for that section
          const p = self.progress;

          // parse hex to rgb
          function hexToRgb(hex){
            const h = hex.replace('#','');
            const bigint = parseInt(h,16);
            return [(bigint>>16)&255, (bigint>>8)&255, bigint&255];
          }

          // interpolate between current root variables and target
          const targetBg = hexToRgb(color);
          const targetAccent = hexToRgb(accent);

          // optional: sample a darker background based on target
          const bgR = Math.round(targetBg[0]*p + 11*(1-p));
          const bgG = Math.round(targetBg[1]*p + 11*(1-p));
          const bgB = Math.round(targetBg[2]*p + 11*(1-p));

          const accentR = Math.round(targetAccent[0]*p + 255*(1-p));
          const accentG = Math.round(targetAccent[1]*p + 0*(1-p));
          const accentB = Math.round(targetAccent[2]*p + 119*(1-p));

          document.documentElement.style.setProperty('--bg', `rgb(${bgR},${bgG},${bgB})`);
          document.documentElement.style.setProperty('--accent', `rgb(${accentR},${accentG},${accentB})`);

          // adjust band and header subtle tint
          document.querySelector('.accent-band').style.background = `linear-gradient(90deg, rgb(${accentR},${accentG},${accentB}), transparent)`;
        }
      });
    });

    // a subtle periodic 'breath' for the accent band tied to scroll velocity
    let last = 0;
    ScrollTrigger.addEventListener('scrollEnd', () => {
      gsap.to('.accent-band', {boxShadow: '0 12px 48px rgba(0,0,0,0.45)', duration:0.6, ease:'power2.out', clearProps:'boxShadow'});
    });

    // parallax-ish background shift for atmosphere
    gsap.to('body', {
      backgroundPosition:'0% 30%',
      ease:'none',
      scrollTrigger:{
        scrub: true
      }
    });

    // small micro-interaction: click to pulse the word
    document.querySelectorAll('.beat').forEach(el => {
      el.addEventListener('click', () => {
        gsap.fromTo(el, {scale:1}, {scale:1.06, duration:0.18, yoyo:true, repeat:1, ease:'power2.inOut'});
      });
    });

    // accessibility: reduce motion respects
    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    if (mq.matches) {
      gsap.globalTimeline.timeScale(0.6);
    }
  </script>
</body>
</html>

